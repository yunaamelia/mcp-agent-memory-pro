pre-commit:
  parallel: true
  jobs:
    # TypeScript/JavaScript
    - name: eslint
      glob: "*.{ts,tsx,js,jsx}"
      run: npx eslint --fix {staged_files}
      stage_fixed: true

    - name: prettier-ts
      glob: "*.{ts,tsx,js,jsx,json}"
      run: npx prettier --write {staged_files}
      stage_fixed: true

    # Python
    - name: ruff-check
      glob: "*.py"
      run: ruff check --fix {staged_files}
      stage_fixed: true

    - name: ruff-format
      glob: "*.py"
      run: ruff format {staged_files}
      stage_fixed: true

    - name: mypy
      glob: "*.py"
      run: mypy {staged_files} --ignore-missing-imports

    # Markdown
    - name: markdownlint
      glob: "*.md"
      run: npx markdownlint-cli --fix {staged_files}
      stage_fixed: true

commit-msg:
  jobs:
    - name: commitlint
      run: npx commitlint --edit {1}

pre-push:
  parallel: true
  jobs:
    - name: typescript-check
      run: npx tsc --noEmit

    - name: python-tests
      run: pytest tests/ -q --tb=short
